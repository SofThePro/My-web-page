<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pong</title>
<style>
  body { background: #000; display: flex; justify-content: center; align-items: center; height: 100vh; }
  canvas { border: 2px solid #00ffcc; }
</style>
</head>
<body>
<canvas id="pong" width="600" height="400"></canvas>
<script>
const canvas = document.getElementById("pong");
const ctx = canvas.getContext("2d");

const player = { x: 0, y: 150, w: 10, h: 100, dy: 0 };
const ai = { x: 590, y: 150, w: 10, h: 100 };
const ball = { x: 300, y: 200, r: 10, dx: 4, dy: 4 };

function drawRect(x, y, w, h, color) {
  ctx.fillStyle = color;
  ctx.fillRect(x, y, w, h);
}
function drawBall(x, y, r, color) {
  ctx.fillStyle = color;
  ctx.beginPath();
  ctx.arc(x, y, r, 0, Math.PI * 2);
  ctx.closePath();
  ctx.fill();
}

function move() {
  player.y += player.dy;
  if (player.y < 0) player.y = 0;
  if (player.y + player.h > 400) player.y = 300;

  ball.x += ball.dx;
  ball.y += ball.dy;

  if (ball.y + ball.r > 400 || ball.y - ball.r < 0) ball.dy *= -1;
  
  // collision
  if (ball.x < player.x + player.w && ball.y > player.y && ball.y < player.y + player.h) ball.dx *= -1;
  if (ball.x > ai.x - ai.w && ball.y > ai.y && ball.y < ai.y + ai.h) ball.dx *= -1;
  
  // ai follow
  ai.y += ((ball.y - (ai.y + ai.h / 2))) * 0.09;
  
  if (ball.x < 0 || ball.x > 600) {
    ball.x = 300; ball.y = 200;
    ball.dx *= -1;
  }
}

function draw() {
  ctx.clearRect(0, 0, 600, 400);
  drawRect(0, 0, 600, 400, "#000");
  drawRect(player.x, player.y, player.w, player.h, "#00ffcc");
  drawRect(ai.x, ai.y, ai.w, ai.h, "#ff0066");
  drawBall(ball.x, ball.y, ball.r, "#fff");
}

function update() {
  move();
  draw();
  requestAnimationFrame(update);
}

document.addEventListener("keydown", e => {
  if (e.key === "ArrowUp") player.dy = -5;
  if (e.key === "ArrowDown") player.dy = 5;
});
document.addEventListener("keyup", e => player.dy = 0);

update();
</script>
</body>
</html>
